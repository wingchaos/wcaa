<html>
<head>
<meta charset="utf-8">
<meta name="author" content="monicaqin">
<meta name="format-detection" content="telephone=no" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<link rel="stylesheet" type="text/css" href="./css.css">
<script type="text/javascript" src="config/jquery-3.2.1.min.js"></script>
<title>波波ACT美化</title>
	
		<script>var wsUri = "ws://@HOST_PORT@/MiniParse"; /*DO NOT EDIT THIS VALUE*/</script>
		<script src="js/wsclass.js"></script>
		<script src="js/cleave.js"></script>
		
<!-- by 紫水栈桥 波波鸟，共同交流
if(window.layer&& layer.type === 'ws'&& location.host === '5401c699-a69b-4e31-9b87-7a0f40b2a304.coding.io')
 { location.href = 'kagero.wchaos.xyz/overlay' + location.search }
document.write(window.layer+"<br>"); 
document.write(layer.type+"<br>"); 
 document.write(location.host+"<br>"); -->
	<!-- background-image: url('images/B0G.jpg'); -->
	<!-- background-position: center; -->
	<!-- background-repeat: repeat; -->
	<!-- box-sizing: border-box; -->
	<!-- height: 100%; -->
	<!-- background-color: transparent; -->
	<!-- overflow: hidden; -->


<script>
		if(!onACTWebSocket)
		{
			$(".capturebtn").remove();
		}
	var dataset = [];
	
	var setting = {};
	setting.topOffset = 40;			// For positioning purposes should be like this
	setting.boxHeight = 50; 		// This gives that little overlap to match the original
	var panduan=-1;
	var myRoleName="帅气的我";
	//==============================================
	// STUFF THAT CAN BE CONFIGURED BY THE USER GOES HERE
	
	setting.flashEnabled = true;	// Set to false to disable flash
	setting.maxDisplay = 11;			// Number of rows to display
	setting.transitionTime = 5;		// Rank animation time, lower = shorter
	setting.fps = 60;				// Drawing fps
	
	setting.nameInitials = "default"; 	// Set name abbreviation rule: "default", "first", "last" or "initials"
	
	//==============================================
	
	var flashFlag = false;
	var flashPos;
	var maxHit = 0;
		

		//
		// プラグイン側から以下のような ActXiv オブジェクトとしてデータが提供される
		//
		// var ActXiv = {
		//	"Encounter": {...},
		//	"Combatant": {
		//		"PlayerName1": {...},
		//		"PlayerName2": {...},
		//		...
		//	}
		// };
		//
		// データの更新は 1 秒毎。
		//
		// プラグインから onOverlayDataUpdate イベントが発行されるので、それを受信することもできる
		// イベントハンドラの第一引数の detail プロパティ内に上記のオブジェクトが入る
		//

		//
		// 表示設定 (2)
		//


		//
		// 以下表示用スクリプト
		//
		// onOverlayDataUpdate イベントを購読
		document.addEventListener("onOverlayDataUpdate", function (e) {
			update(e.detail);
		});

		var ranking = new Array(); // TODO give this var a better name
		var prevRank;
		
				// ACTWebSocket 적용    
  
// 해상도 변경 적용
  function windowmode() {
    var el = document
        , rfs = // for newer Webkit and Firefox
               el.exitFullScreen
            || el.webkitExitFullscreen
            || el.mozCancelFullScreen
            || el.msExitFullScreen
    rfs.call(el);
  }


  function tozhongwen(anyonex){
	switch(anyonex) {
		case 'the Thousand Maws of Toto–Rak': return  '监狱废墟托托·拉克千狱';
		case 'the Tam–Tara Deepcroft': return  '地下灵殿塔姆·塔拉墓园';
		case 'Copperbell Mines': return  '封锁坑道铜铃铜山';
		case 'Sastasha': return  '天然要害沙斯塔夏溶洞';
		case 'the Aurum Vale': return  '毒雾洞窟黄金谷';
		case 'Haukke Manor': return  '名门府邸静语庄园';
		case 'Halatali': return  '魔兽领域日影地修炼所';
		case 'Brayflox\'s Longstop': return  '休养胜地布雷福洛克斯野营地';
		case 'the Sunken Temple of Qarn': return  '古代遗迹喀恩埋没圣堂';
		case 'the Wanderer\'s Palace': return  '神灵圣域放浪神古神殿';
		case 'the Stone Vigil': return  '对龙城塞石卫塔';
		case 'Cutter\'s Cry': return  '流沙迷宫樵鸣洞';
		case 'Dzemael Darkhold': return  '山中战线泽梅尔要塞';
		case 'Amdapor Keep': return  '邪教驻地无限城古堡';
		case 'Castrum Meridianum': return  '神兵要塞帝国南方堡';
		case 'the Praetorium': return  '最终决战天幕魔导城';
		case 'Pharos Sirius': return  '领航明灯天狼星灯塔';
		case 'Copperbell Mines (Hard)': return  '骚乱坑道铜铃铜山';
		case 'Haukke Manor (Hard)': return  '恶灵府邸静语庄园';
		case 'Brayflox\'s Longstop (Hard)': return  '纷争要地布雷福洛克斯野营地';
		case 'Halatali (Hard)': return  '剑斗领域日影地修炼所';
		case 'the Lost City of Amdapor': return  '腐坏遗迹无限城市街古迹';
		case 'Hullbreaker Isle': return  '财宝传说破舰岛';
		case 'the Tam–Tara Deepcroft (Hard)': return  '惨剧灵殿塔姆·塔拉墓园';
		case 'the Stone Vigil (Hard)': return  '激战城塞石卫塔';
		case 'the Sunken Temple of Qarn (Hard)': return  '苏醒遗迹喀恩埋没圣堂';
		case 'Snowcloak': return  '凛冽洞天披雪大冰壁';
		case 'Sastasha (Hard)': return  '逆转要害沙斯塔夏溶洞';
		case 'Amdapor Keep (Hard)': return  '邪念妖地无限城古堡';
		case 'the Wanderer\'s Palace (Hard)': return  '武装圣域放浪神古神殿';
		case 'the Great Gubal Library': return  '学识宝库迦巴勒幻想图书馆';
		case 'the Keeper of the Lake': return  '幻龙残骸密约之塔';
		case 'Neverreap': return  '空中神域不获岛';
		case 'the Vault': return  '圣教中枢伊修加德教皇厅';
		case 'the Fractal Continuum': return  '博物战舰无限回廊';
		case 'the Dusk Vigil': return  '冰雪废堡暮卫塔';
		case 'Sohm Al': return  '天山绝顶索姆阿尔灵峰';
		case 'the Aetherochemical Research Facility': return  '血战苍穹魔科学研究所';
		case 'the Aery': return  '邪龙王座龙巢神殿';
		case 'Pharos Sirius (Hard)': return  '地脉灵灯天狼星灯塔';
		case 'Saint Mocianne\'s Arboretum': return  '草木庭园圣茉夏娜植物园';
		case 'Basic Training: Enemy Parties': return  '完成集团战训练！';
		case 'Under the Armor': return  '讨伐彷徨死灵！';
		case 'Basic Training: Enemy Strongholds': return  '突破所有关门，讨伐最深处的敌人！';
		case 'Hero on the Half Shell': return  '捕获金币龟！';
		case 'Pulling Poison Posies': return  '驱除剧毒妖花！';
		case 'Stinging Back': return  '消灭恶徒团伙寄生蜂团！';
		case 'All\'s Well that Ends in the Well': return  '讨伐梦幻之布拉奇希奥！';
		case 'Flicking Sticks and Taking Names': return  '击溃哥布林炸弹军团！';
		case 'More than a Feeler': return  '讨伐污染源头魔界花！';
		case 'Annoy the Void': return  '讨伐坑道中出现的妖异！';
		case 'Shadow and Claw': return  '注意无敌的眷属，讨伐大型妖异！';
		case 'Long Live the Queen': return  '讨伐爆弹怪的女王！';
		case 'Ward Up': return  '歼灭特殊阵型的妖异！';
		case 'Solemn Trinity': return  '制止三方混战的巨人族，守住遗物！';
		case 'the Bowl of Embers': return  '伊弗利特讨伐战';
		case 'the Navel': return  '泰坦讨伐战';
		case 'the Howling Eye': return  '迦楼罗讨伐战';
		case 'the Bowl of Embers (Hard)': return  '伊弗利特歼灭战';
		case 'the Navel (Hard)': return  '泰坦歼灭战';
		case 'the Howling Eye (Hard)': return  '迦楼罗歼灭战';
		case 'the Bowl of Embers (Extreme)': return  '伊弗利特歼殛战';
		case 'the Navel (Extreme)': return  '泰坦歼殛战';
		case 'the Howling Eye (Extreme)': return  '迦楼罗歼殛战';
		case 'Thornmarch (Hard)': return  '莫古力贤王歼灭战';
		case 'Thornmarch (Extreme)': return  '莫古力贤王歼殛战';
		case 'the Minstrel\'s Ballad: Ultima\'s Bane': return  '究极神兵假想作战';
		case 'Special Event III': return  '活动挑战1';
		case 'Special Event I': return  '活动挑战2';
		case 'Special Event II': return  '活动挑战3';
		case 'the <Emphasis>Whorleater</Emphasis> (Hard)': return  '利维亚桑歼灭战';
		case 'the <Emphasis>Whorleater</Emphasis> (Extreme)': return  '利维亚桑歼殛战';
		case 'A Relic Reborn: the Chimera': return  '死化奇美拉讨伐战';
		case 'A Relic Reborn: the Hydra': return  '海德拉讨伐战';
		case 'Battle on the Big Bridge': return  '大桥上的决斗';
		case 'the Striking Tree (Hard)': return  '拉姆歼灭战';
		case 'the Striking Tree (Extreme)': return  '拉姆歼殛战';
		case 'the Akh Afah Amphitheatre (Hard)': return  '希瓦歼灭战';
		case 'the Akh Afah Amphitheatre (Extreme)': return  '希瓦歼殛战';
		case 'the Dragon\'s Neck': return  '艾玛吉娜杯斗技大会决赛';
		case 'Urth\'s Fount': return  '奥丁歼灭战';
		case 'the Chrysalis': return  '那布里亚勒斯讨伐战';
		case 'Battle in the Big Keep': return  '无限城的死斗';
		case 'Thok ast Thok (Hard)': return  '罗波那歼灭战';
		case 'Thok ast Thok (Extreme)': return  '罗波那歼殛战';
		case 'the Limitless Blue (Hard)': return  '俾斯麦歼灭战';
		case 'the Limitless Blue (Extreme)': return  '俾斯麦歼殛战';
		case 'the Singularity Reactor': return  '圆桌骑士歼灭战';
		case 'the Minstrel\'s Ballad: Thordan\'s Reign': return  '圆桌骑士幻想歼灭战';
		case 'the Labyrinth of the Ancients': return  '水晶塔 古代人迷宫';
		case 'the Binding Coil of Bahamut - Turn 1': return  '巴哈姆特大迷宫 邂逅之章1';
		case 'the Binding Coil of Bahamut - Turn 2': return  '巴哈姆特大迷宫 邂逅之章2';
		case 'the Binding Coil of Bahamut - Turn 3': return  '巴哈姆特大迷宫 邂逅之章3';
		case 'the Binding Coil of Bahamut - Turn 4': return  '巴哈姆特大迷宫 邂逅之章4';
		case 'the Binding Coil of Bahamut - Turn 5': return  '巴哈姆特大迷宫 邂逅之章5';
		case 'the Second Coil of Bahamut - Turn 1': return  '巴哈姆特大迷宫 入侵之章1';
		case 'the Second Coil of Bahamut - Turn 2': return  '巴哈姆特大迷宫 入侵之章2';
		case 'the Second Coil of Bahamut - Turn 3': return  '巴哈姆特大迷宫 入侵之章3';
		case 'the Second Coil of Bahamut - Turn 4': return  '巴哈姆特大迷宫 入侵之章4';
		case 'Syrcus Tower': return  '水晶塔 希尔科斯塔';
		case 'the Second Coil of Bahamut (Savage) - Turn 1': return  '巴哈姆特零式大迷宫 入侵之章1';
		case 'the Second Coil of Bahamut (Savage) - Turn 2': return  '巴哈姆特零式大迷宫 入侵之章2';
		case 'the Second Coil of Bahamut (Savage) - Turn 3': return  '巴哈姆特零式大迷宫 入侵之章3';
		case 'the Second Coil of Bahamut (Savage) - Turn 4': return  '巴哈姆特零式大迷宫 入侵之章4';
		case 'the Final Coil of Bahamut - Turn 1': return  '巴哈姆特大迷宫 真源之章1';
		case 'the Final Coil of Bahamut - Turn 2': return  '巴哈姆特大迷宫 真源之章2';
		case 'the Final Coil of Bahamut - Turn 3': return  '巴哈姆特大迷宫 真源之章3';
		case 'the Final Coil of Bahamut - Turn 4': return  '巴哈姆特大迷宫 真源之章4';
		case 'the World of Darkness': return  '水晶塔 暗之世界';
		case 'Alexander - The Fist of the Father': return  '亚历山大机神城 启动之章1';
		case 'Alexander - The Cuff of the Father': return  '亚历山大机神城 启动之章2';
		case 'Alexander - The Arm of the Father': return  '亚历山大机神城 启动之章3';
		case 'Alexander - The Burden of the Father': return  '亚历山大机神城 启动之章4';
		case 'Alexander - The Fist of the Father (Savage)': return  '亚历山大零式机神城 启动之章1';
		case 'Alexander - The Cuff of the Father (Savage)': return  '亚历山大零式机神城 启动之章2';
		case 'Alexander - The Arm of the Father (Savage)': return  '亚历山大零式机神城 启动之章3';
		case 'Alexander - The Burden of the Father (Savage)': return  '亚历山大零式机神城 启动之章4';
		case 'the Void Ark': return  '魔航船虚无方舟';
		case 'the Borderland Ruins (Secure)': return  '周边遗迹群（阵地战）';
		case 'Seal Rock (Seize)': return  '尘封秘岩（争夺战）';
		case 'the Diadem (Easy)': return  '云冠群岛白昼探索';
		case 'the Diadem': return  '云冠群岛黄昏探索';
		case 'the Diadem (Hard)': return  '云冠群岛夜晚探索';
		case 'Containment Bay S1T7': return  '萨菲洛特歼灭战';
		case 'Containment Bay S1T7 (Extreme)': return  '萨菲洛特歼殛战';
		case 'Alexander - The Fist of the Son': return  '亚历山大机神城 律动之章1';
		case 'Alexander - The Cuff of the Son': return  '亚历山大机神城 律动之章2';
		case 'Alexander - The Arm of the Son': return  '亚历山大机神城 律动之章3';
		case 'Alexander - The Burden of the Son': return  '亚历山大机神城 律动之章4';
		case 'the Lost City of Amdapor (Hard)': return  '神圣遗迹无限城市街古迹';
		case 'the Antitower': return  '星海空间颠倒塔';
		case 'Alexander - The Fist of the Son (Savage)': return  '亚历山大零式机神城 律动之章1';
		case 'Alexander - The Cuff of the Son (Savage)': return  '亚历山大零式机神城 律动之章2';
		case 'Alexander - The Arm of the Son (Savage)': return  '亚历山大零式机神城 律动之章3';
		case 'Alexander - The Burden of the Son (Savage)': return  '亚历山大零式机神城 律动之章4';
		case 'Avoid Area of Effect Attacks': return  '躲避范围攻击';
		case 'Execute a Combo to Increase Enmity': return  '掌握仇恨连击';
		case 'Execute a Combo in Battle': return  '控制敌人的仇恨';
		case 'Accrue Enmity from Multiple Targets': return  '控制多个敌人的仇恨';
		case 'Engage Multiple Targets': return  '实战控制多个敌人的仇恨';
		case 'Execute a Ranged Attack to Increase Enmity': return  '控制远处敌人的仇恨';
		case 'Engage Enemy Reinforcements': return  '留心增援的敌人';
		case 'Assist Allies in Defeating a Target': return  '配合防护职业打倒单个敌人';
		case 'Defeat an Occupied Target': return  '配合防护职业打倒多个敌人';
		case 'Avoid Engaged Targets': return  '躲避范围攻击的同时进行战斗';
		case 'Engage Enemy Reinforcements': return  '打倒增援的敌人';
		case 'Interact with the Battlefield': return  '灵活运用场地机关';
		case 'Heal an Ally': return  '治疗防护职业';
		case 'Heal Multiple Allies': return  '治疗小队队员';
		case 'Avoid Engaged Targets': return  '躲避范围攻击的同时进行战斗';
		case 'Final Exercise': return  '最终训练';
		case 'a Spectacle for the Ages': return  '四国联合军演';
		case 'the Weeping City of Mhach': return  '禁忌城邦玛哈';
		case 'the Final Steps of Faith': return  '尼德霍格征龙战';
		case 'the Minstrel\'s Ballad: Nidhogg\'s Rage': return  '尼德霍格传奇征龙战';
		case 'Sohr Khai': return  '天龙宫殿忆罪宫';
		case 'Hullbreaker Isle (Hard)': return  '黑涡传说破舰岛';
		case 'a Bloody Reunion': return  '雷古拉·范·休著斯追击战';
		case 'the Palace of the Dead (Floors 1-10)': return  '死者宫殿 地下1～10层';
		case 'the Palace of the Dead (Floors 11-20)': return  '死者宫殿 地下11～20层';
		case 'the Palace of the Dead (Floors 21-30)': return  '死者宫殿 地下21～30层';
		case 'the Palace of the Dead (Floors 31-40)': return  '死者宫殿 地下31～40层';
		case 'the Palace of the Dead (Floors 41-50)': return  '死者宫殿 地下41～50层';
		case 'the Aquapolis': return  '水城宝物库';
		case 'the Fields of Glory (Shatter)': return  '荣誉野（碎冰战）';
		case 'the Haunted Manor': return  '亡灵府邸闹鬼庄园';
		case 'Xelphatol': return  '险峻峡谷塞尔法特尔溪谷';
		case 'Containment Bay P1T6': return  '索菲娅歼灭战';
		case 'Containment Bay P1T6 (Extreme)': return  '索菲娅歼殛战';
		case 'Alexander - The Eyes of the Creator': return  '亚历山大机神城 天动之章1';
		case 'Alexander - The Breath of the Creator': return  '亚历山大机神城 天动之章2';
		case 'Alexander - The Heart of the Creator': return  '亚历山大机神城 天动之章3';
		case 'Alexander - The Soul of the Creator': return  '亚历山大机神城 天动之章4';
		case 'Alexander - The Eyes of the Creator (Savage)': return  '亚历山大零式机神城 天动之章1';
		case 'Alexander - The Breath of the Creator (Savage)': return  '亚历山大零式机神城 天动之章2';
		case 'Alexander - The Heart of the Creator (Savage)': return  '亚历山大零式机神城 天动之章3';
		case 'Alexander - The Soul of the Creator (Savage)': return  '亚历山大零式机神城 天动之章4';
		case 'One Life for One World': return  '纠缠不清的宿命';
		case 'the Triple Triad Battlehall': return  '九宫幻卡：幻卡对局室';
		case 'the Great Gubal Library (Hard)': return  '秘本宝库迦巴勒幻想图书馆';
		case 'LoVM: Player Battle (RP)': return  '萌宠之王：玩家对战（绩点赛）';
		case 'LoVM: Tournament': return  '萌宠之王：大赛对战（玩家对战）';
		case 'LoVM: Player Battle (Non-RP)': return  '萌宠之王：玩家对战（无绩点赛）';
		case 'the Diadem Hunting Grounds (Easy)': return  '云冠群岛白昼探索（狩猎专用）';
		case 'the Diadem Hunting Grounds': return  '云冠群岛黄昏探索（狩猎专用）';
		case 'the Palace of the Dead (Floors 51-60)': return  '死者宫殿 地下51～60层';
		case 'the Palace of the Dead (Floors 61-70)': return  '死者宫殿 地下61～70层';
		case 'the Palace of the Dead (Floors 71-80)': return  '死者宫殿 地下71～80层';
		case 'the Palace of the Dead (Floors 81-90)': return  '死者宫殿 地下81～90层';
		case 'the Palace of the Dead (Floors 91-100)': return  '死者宫殿 地下91～100层';
		case 'the Palace of the Dead (Floors 101-110)': return  '死者宫殿 地下101～110层';
		case 'the Palace of the Dead (Floors 111-120)': return  '死者宫殿 地下111～120层';
		case 'the Palace of the Dead (Floors 121-130)': return  '死者宫殿 地下121～130层';
		case 'the Palace of the Dead (Floors 131-140)': return  '死者宫殿 地下131～140层';
		case 'the Palace of the Dead (Floors 141-150)': return  '死者宫殿 地下141～150层';
		case 'the Palace of the Dead (Floors 151-160)': return  '死者宫殿 地下151～160层';
		case 'the Palace of the Dead (Floors 161-170)': return  '死者宫殿 地下161～170层';
		case 'the Palace of the Dead (Floors 171-180)': return  '死者宫殿 地下171～180层';
		case 'the Palace of the Dead (Floors 181-190)': return  '死者宫殿 地下181～190层';
		case 'the Palace of the Dead (Floors 191-200)': return  '死者宫殿 地下191～200层';
		case 'Baelsar\'s Wall': return  '坚牢铁壁巴埃萨长城';
		case 'Dun Scaith': return  '影之国';
		case 'Sohm Al (Hard)': return  '天山深境索姆阿尔灵峰';
		case 'The Carteneau Flats: Heliodrome': return  '加尔提诺平原遭遇战';
		case 'Containment Bay Z1T9': return  '祖尔宛歼灭战';
		case 'Containment Bay Z1T9 (Extreme)': return  '祖尔宛歼殛战';
		case 'the Diadem - Trials of the Fury': return  '云冠群岛战争神猎场';
		case 'the Diadem - Trials of the Matron': return  '云冠群岛丰饶神福地';
		case 'Shisui of the Violet Tides': return  '海底宫殿紫水宫';
		case 'The Temple of the Fist': return  '修行古刹星导寺';
		case 'It\'s Probably a Trap': return  '鱼道现身！';
		case 'The Sirensong Sea': return  '漂流海域妖歌海';
		case 'the Royal Menagerie': return  '神龙歼灭战';
		case 'Bardam\'s Mettle': return  '试炼行路巴儿达木霸道';
		case 'Doma Castle': return  '解放决战多玛王城';
		case 'Castrum Abania': return  '巨炮要塞帝国白山堡';
		case 'the Pool of Tribute': return  '须佐之男歼灭战';
		case 'the Pool of Tribute (Extreme)': return  '须佐之男歼殛战';
		case 'With Heart and Steel': return  '抗争之力';
		case 'Naadam': return  '那达慕';
		case 'Ala Mhigo': return  '鏖战红莲阿拉米格';
		case 'Blood on the Deck': return  '海都路人身首异';
		case 'The Face of True Evil': return  '极恶之人木枯';
		case 'Matsuba Mayhem': return  '松叶门外之变';
		case 'The Battle on Bekko': return  '决战龟甲岛';
		case 'Deltascape V1.0': return  '欧米茄时空狭缝 德尔塔幻境1';
		case 'Deltascape V2.0': return  '欧米茄时空狭缝 德尔塔幻境2';
		case 'Deltascape V3.0': return  '欧米茄时空狭缝 德尔塔幻境3';
		case 'Deltascape V4.0': return  '欧米茄时空狭缝 德尔塔幻境4';
		case 'Deltascape V1.0 (Savage)': return  '欧米茄零式时空狭缝 德尔塔幻境1';
		case 'Deltascape V2.0 (Savage)': return  '欧米茄零式时空狭缝 德尔塔幻境2';
		case 'Deltascape V3.0 (Savage)': return  '欧米茄零式时空狭缝 德尔塔幻境3';
		case 'Deltascape V4.0 (Savage)': return  '欧米茄零式时空狭缝 德尔塔幻境4';
		case 'Curious Gorge Meets His Match': return  '原初的战士';
		case 'In Thal\'s Name': return  '大会开始';
		case 'Kugane Castle': return  '恶党孤城黄金阁';
		case 'Emanation': return  '吉祥天女歼灭战';
		case 'Emanation (Extreme)': return  '吉祥天女歼殛战';
		case 'Our Unsung Heroes': return  '穿越时空的夙愿';
		case 'The Heart of the Problem': return  '燃烧吧高吉';
		case 'Dark as the Night Sky': return  '漆黑的巨龙';
		case 'the Lost Canals of Uznair': return  '运河宝物库';
		case 'The Resonant': return  '于里昂热的秘策';
		case 'Raising the Sword': return  '为了更强';
		case 'The Orphans and the Broken Blade': return  '遥远的憧憬';
		case 'Our Compromise': return  '再次相见';
		case 'Dragon Sound': return  '红血之龙骑士';
		case 'When Clans Collide': return  '影隐忍法贴';
		case 'Interdimensional Rift': return  '时空狭缝外缘';
		case 'the Hidden Canals of Uznair': return  '运河宝物库深层';
		case 'Astragalos': return  '距骨研究所（机动战）';
		case 'the Minstrel\'s Ballad: Shinryu\'s Domain': return  '神龙梦幻歼灭战';
		case 'the Drowned City of Skalla': return  '沉没神殿斯卡拉遗迹';
		case 'the Unending Coil of Bahamut (Ultimate)': return  '巴哈姆特绝境战';
		case 'the Royal City of Rabanastre': return  '失落之都拉巴纳斯塔';
		case 'Return of the Bull': return  '英雄归来';
		case 'the Forbidden Land, Eureka Anemos': return  '禁地优雷卡 常风之地';
		case 'Hells\' Lid': return  '红玉火山狱之盖';
		case 'the Fractal Continuum (Hard)': return  '疯狂战舰无限回廊';
		case 'Sigmascape V1.0': return  '欧米茄时空狭缝 西格玛幻境1';
		case 'Sigmascape V2.0': return  '欧米茄时空狭缝 西格玛幻境2';
		case 'Sigmascape V3.0': return  '欧米茄时空狭缝 西格玛幻境3';
		case 'Sigmascape V4.0': return  '欧米茄时空狭缝 西格玛幻境4';
		case 'the Jade Stoa': return  '白虎镇魂战';
		case 'the Jade Stoa (Extreme)': return  '白虎诗魂战';
		case 'Sigmascape V1.0 (Savage)': return  '欧米茄零式时空狭缝 西格玛幻境1';
		case 'Sigmascape V2.0 (Savage)': return  '欧米茄零式时空狭缝 西格玛幻境2';
		case 'Sigmascape V3.0 (Savage)': return  '欧米茄零式时空狭缝 西格玛幻境3';
		case 'Sigmascape V4.0 (Savage)': return  '欧米茄零式时空狭缝 西格玛幻境4';
		case 'the Valentione\'s Ceremony': return  '良缘仪式';
		case 'the Great Hunt': return  '火龙狩猎战';
		case 'the Great Hunt (Extreme)': return  '火龙上位狩猎战';
		case 'Chocobo Race: Tutorial': return  '陆行鸟竞赛：竞赛教学';
		case 'Race 1 - Hugging the Inside': return  '第1关：抢占内圈赛道';
		case 'Race 2 - Keep Away': return  '第2关：躲避范围攻击';
		case 'Race 3 - Inability': return  '第3关：能力不是万能的';
		case 'Race 4 - Heavy Hooves': return  '第4关：沉重的竞赛（上）';
		case 'Race 5 - Defending the Rush': return  '第5关：站住别跑';
		case 'Race 6 - Road Rivals': return  '第6关：打击竞争对手';
		case 'Race 7 - Field of Dreams': return  '第7关：梦幻的结界';
		case 'Race 8 - Playing Both Ends': return  '第8关：鹬蚌相争渔翁得利';
		case 'Race 9 - Stamina': return  '第9关：体力之战';
		case 'Race 10 - Cat and Mouse': return  '第10关：逃亡者和追赶者';
		case 'Race 11 - Mad Dash': return  '第11关：全速冲刺';
		case 'Race 12 - Bag of Tricks': return  '第12关：活用竞赛能力';
		case 'Race 13 - Tag Team': return  '第13关：突破对手的协作';
		case 'Race 14 - Heavier Hooves': return  '第14关：沉重的竞赛（下）';
		case 'Race 15 - Ultimatum': return  '第15关：究极陆行鸟竞赛';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'Chocobo Race: Sagolii Road': return  '陆行鸟竞赛：荒野大道';
		case 'Chocobo Race: Costa del Sol': return  '陆行鸟竞赛：太阳海岸';
		case 'Chocobo Race: Tranquil Paths': return  '陆行鸟竞赛：恬静小路';
		case 'the Swallow\'s Compass': return  '风水灵庙岩燕庙';
		case 'Castrum Fluminis': return  '月读歼灭战';
		case 'the Minstrel\'s Ballad: Tsukuyomi\'s Pain': return  '月读幽夜歼灭战';
		case 'the Weapon\'s Refrain (Ultimate)': return  '究极神兵绝境战';
		case 'Heaven-on-High  (Floors 1-10)': return  '天之御柱 1～10层';
		case 'Heaven-on-High  (Floors 11-20)': return  '天之御柱 11～20层';
		case 'Heaven-on-High  (Floors 21-30)': return  '天之御柱 21～30层';
		case 'Heaven-on-High  (Floors 31-40)': return  '天之御柱 31～40层';
		case 'Heaven-on-High  (Floors 41-50)': return  '天之御柱 41～50层';
		case 'Heaven-on-High  (Floors 51-60)': return  '天之御柱 51～60层';
		case 'Heaven-on-High  (Floors 61-70)': return  '天之御柱 61～70层';
		case 'Heaven-on-High  (Floors 71-80)': return  '天之御柱 71～80层';
		case 'Heaven-on-High  (Floors 81-90)': return  '天之御柱 81～90层';
		case 'Heaven-on-High  (Floors 91-100)': return  '天之御柱 91～100层';
		case 'the Ridorana Lighthouse': return  '封闭圣塔黎铎拉纳大灯塔';
		case 'Stage 1: Tutorial': return  '第1关：新手教学';
		case 'Stage 2: Hatching a Plan': return  '第2关：到处都是巧儿鸟';
		case 'Stage 3: The First Move': return  '第3关：万事开头难';
		case 'Stage 4: Little Big Beast': return  '第4关：小小巨兽';
		case 'Stage 5: Turning Tribes': return  '第5关：蛮族叛乱';
		case 'Stage 6: Off the Deepcroft': return  '第6关：恐怖的墓园';
		case 'Stage 7: Rivals': return  '第7关：劲敌共斗';
		case 'Stage 8: Always Darkest': return  '第8关：光暗之界乃拂晓';
		case 'Stage 9: Mine Your Minions': return  '第9关：铜山爆破';
		case 'Stage 10: Children of Mandragora': return  '第10关：蔓德拉之子';
		case 'Stage 11: The Queen and I': return  '第11关：女王陛下万岁！';
		case 'Stage 12: Breakout': return  '第12关：打砖块';
		case 'Stage 13: My Name Is Cid': return  '第13关：首席机械师';
		case 'Stage 14: Like a Nut': return  '第14关：硬如坚果';
		case 'Stage 15: Urth\'s Spout': return  '第15关：小小斗神讨伐战';
		case 'Stage 16: Exodus': return  '第16关：陆行鸟大进军';
		case 'Stage 17: Over the Wall': return  '第17关：披雪小冰壁';
		case 'Stage 18: The Hunt': return  '第18关：小怪物狩猎';
		case 'Stage 19: Battle on the Bitty Bridge': return  '第19关：小桥上的决斗';
		case 'Stage 20: Guiding Light': return  '第20关：愿水晶给予你指引';
		case 'Stage 21: Wise Words': return  '第21关：贤者的试炼';
		case 'Stage 22: World of Poor Lighting': return  '第22关：暗淡的世界';
		case 'Stage 23: The Binding Coil': return  '第23关：巴哈姆特小迷宫邂逅之章';
		case 'Stage 24: The Final Coil': return  '第24关：巴哈姆特小迷宫真源之章';
		case 'LoVM: Master Battle': return  '萌宠之王：讨伐级单人战';
		case 'LoVM: Master Battle (Hard)': return  '萌宠之王：歼灭级单人战';
		case 'LoVM: Master Battle (Extreme)': return  '萌宠之王：歼殛级单人战';
		case 'LoVM: Master Tournament': return  '萌宠之王：大赛对战（人机对战）';
		case 'the Forbidden Land, Eureka Pagos': return  '禁地优雷卡 恒冰之地';
		case 'Emissary of the Dawn': return  '拂晓的少年';
		case 'the Calamity Retold': return  '灾厄重现军事演习';
		case 'Saint Mocianne\'s Arboretum (Hard)': return  '污染庭园圣茉夏娜植物园';
		case 'the Burn': return  '死亡大地终末焦土';
		case 'the Shifting Altars of Uznair': return  '运河宝物库神殿';
		case 'Alphascape V1.0': return  '欧米茄时空狭缝 阿尔法幻境1';
		case 'Alphascape V2.0': return  '欧米茄时空狭缝 阿尔法幻境2';
		case 'Alphascape V3.0': return  '欧米茄时空狭缝 阿尔法幻境3';
		case 'Alphascape V4.0': return  '欧米茄时空狭缝 阿尔法幻境4';
		case 'Alphascape V1.0 (Savage)': return  '欧米茄零式时空狭缝 阿尔法幻境1';
		case 'Alphascape V2.0 (Savage)': return  '欧米茄零式时空狭缝 阿尔法幻境2';
		case 'Alphascape V3.0 (Savage)': return  '欧米茄零式时空狭缝 阿尔法幻境3';
		case 'Alphascape V4.0 (Savage)': return  '欧米茄零式时空狭缝 阿尔法幻境4';
		case 'Kugane Ohashi': return  '保镖歼灭战';
		case 'Hells\' Kier': return  '朱雀镇魂战';
		case 'Hells\' Kier (Extreme)': return  '朱雀诗魂战';
		case 'the Forbidden Land, Eureka Pyros': return  '禁地优雷卡 涌火之地';
		case 'Hidden Gorge': return  '隐塞（机动战）';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'The Will of the Moon': return  '楔石洞';
		case 'All\'s Well That Starts Well': return  '出道战';
		case 'the Ghimlyt Dark': return  '国境防线基姆利特暗区';
		case 'Much Ado About Pudding': return  '布丁拼盘';
		case 'Waiting for Golem': return  '最初的岩壁——希帕克纳';
		case 'Gentlemen Prefer Swords': return  '怪力铁巨人——克利俄斯';
		case 'The Threepenny Turtles': return  '金币龟兄弟';
		case 'Eye Society': return  '铁鹰战士';
		case 'A Chorus Slime': return  '粘液怪合唱团';
		case 'Bomb-edy of Errors': return  '青之牙、红之牙';
		case 'To Kill a Mockingslime': return  '七彩甜点——棉花糖';
		case 'A Little Knight Music': return  '无头王者——幽黑曲偶';
		case 'Some Like It Excruciatingly Hot': return  '爆前速攻';
		case 'The Plant-om of the Opera': return  '寄生植物——白鹭花';
		case 'Beauty and a Beast': return  '猩红死妖姬——卡蜜拉';
		case 'Blobs in the Woods': return  '陪葬';
		case 'The Me Nobody Nodes': return  '来自亚拉戈的威胁——斗兽系统';
		case 'Sunset Bull-evard': return  '怪力兽王——迪克巴朗';
		case 'The Sword of Music': return  '刚柔铁巨人——克利俄斯改';
		case 'Midsummer Night\'s Explosion': return  '爆破死斗';
		case 'On a Clear Day You Can Smell Forever': return  '魅惑芳香——反光瑞贝卡';
		case 'Miss Typhon': return  '著名组合——奥尔特罗斯&提丰';
		case 'Chimera on a Hot Tin Roof': return  '愤怒合成兽——阿帕德马克';
		case 'Here Comes the Boom': return  '爆炸湮灭——先祖爆弹怪';
		case 'Behemoths and Broomsticks': return  '魔兽皇太子——贝希摩斯太子';
		case 'Amazing Technicolor Pit Fiends': return  '异形人偶师——艾匹罗基';
		case 'Dirty Rotten Azulmagia': return  '邪恶青魔法师——启示者';
		case 'the Orbonne Monastery': return  '乐欲之所瓯博讷修道院';
		case 'the Wreath of Snakes': return  '青龙镇魂战';
		case 'the Wreath of Snakes (Extreme)': return  '青龙诗魂战';
		case 'the Forbidden Land, Eureka Hydatos': return  '禁地优雷卡 丰水之地';
		case 'Air Force One': return  '空军装甲驾驶员';
		case 'Air Force One': return  '空军装甲驾驶员';
		case 'Air Force One': return  '空军装甲驾驶员';
		case 'Novice Mahjong (Full Ranked Match)': return  '多玛方城战：半庄战一般桌（段位战）';
		case 'Advanced Mahjong (Full Ranked Match)': return  '多玛方城战：半庄战有段桌（段位战）';
		case 'Four-player Mahjong (Full Match, Kuitan Enabled)': return  '多玛方城战：半庄战4人亲友桌（带食断）';
		case 'Messenger of the Winds': return  '风之使者';
		case 'a Requiem for Heroes': return  '英雄挽歌';
		case 'Dohn Mheg': return  '水妖幻园多恩美格禁园';
		case 'Four-player Mahjong (Full Match, Kuitan Disabled)': return  '多玛方城战：半庄战4人亲友桌（不带食断）';
		case 'the Qitana Ravel': return  '文明古迹奇坦那神影洞';
		case 'Amaurot': return  '末日暗影亚马乌罗提';
		case 'Eden\'s Gate: Resurrection': return  '伊甸希望乐园 觉醒之章1';
		case 'Eden\'s Gate: Resurrection (Savage)': return  '伊甸零式希望乐园 觉醒之章1';
		case 'the Twinning': return  '异界遗构希尔科斯孪晶塔';
		case 'Malikah\'s Well': return  '避暑离宫马利卡大井';
		case 'The Dancing Plague': return  '缇坦妮雅歼灭战';
		case 'the Dancing Plague (Extreme)': return  '缇坦妮雅歼殛战';
		case 'Mt. Gulg': return  '伪造天界格鲁格火山';
		case 'Akadaemia Anyder': return  '创造机构阿尼德罗学院';
		case 'The Crown of the Immaculate': return  '无瑕灵君歼灭战';
		case 'the Crown of the Immaculate (Extreme)': return  '无瑕灵君歼殛战';
		case 'Holminster Switch': return  '遇袭集落水滩村';
		case 'The Hardened Heart': return  '摇摆的天平';
		case 'The Lost and the Found': return  '古代大再生魔法';
		case 'Coming Clean': return  '废都拿巴示艾兰';
		case 'Legend of the Not-so-hidden Temple': return  '机关、诅咒、剧毒与……';
		case 'Eden\'s Gate: Inundation': return  '伊甸希望乐园 觉醒之章3';
		case 'Eden\'s Gate: Inundation (Savage)': return  '伊甸零式希望乐园 觉醒之章3';
		case 'Eden\'s Gate: Descent': return  '伊甸希望乐园 觉醒之章2';
		case 'Eden\'s Gate: Descent (Savage)': return  '伊甸零式希望乐园 觉醒之章2';
		case 'Nyelbert\'s Lament': return  '奈贝尔特的后悔';
		case 'The Dying Gasp': return  '哈迪斯歼灭战';
		case 'The Dungeons of Lyhe Ghiah': return  '梦羽宝境';
		case 'Eden\'s Gate: Sepulture': return  '伊甸希望乐园 觉醒之章4';
		case 'Eden\'s Gate: Sepulture (Savage)': return  '伊甸零式希望乐园 觉醒之章4';
		case 'The Hunter\'s Legacy': return  '勇敢的猎人';
		case 'The Grand Cosmos': return  '魔法宫殿宇宙宫';
		case 'The Minstrel\'s Ballad: Hades\'s Elegy': return  '哈迪斯孤念歼灭战';
		case 'The Epic of Alexander (Ultimate)': return  '亚历山大绝境战';
		case 'Papa Mia': return  '强大的老爹——洪巴巴之父';
		case 'Lock up Your Snorters': return  '鼻息爆破死斗';
		case 'Dangerous When Dead': return  '绝妙傀儡师——都灵';
		case 'Red, Fraught, and Blue': return  '水与火之歌';
		case 'The Catch of the Siegfried': return  '世界第一剑士——齐格弗里德';
		case 'The Copied Factory': return  '复制工厂废墟';
		case 'Onsal Hakair (Danshig Naadam)': return  '昂萨哈凯尔（竞争战）';
		case 'Vows of Virtue, Deeds of Cruelty': return  '纯白誓约、漆黑密约';
		case 'As the Heart Bids': return  '我心依旧';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Leap of Faith': return  '虚景跳跳乐大挑战';
		case 'Anamnesis Anyder': return  '黑风海底阿尼德罗追忆馆';
		case 'Eden\'s Verse: Fulmination': return  '伊甸希望乐园 共鸣之章1';
		case 'Eden\'s Verse: Fulmination (Savage)': return  '伊甸零式希望乐园 共鸣之章1';
		case 'Cinder Drift': return  '红宝石神兵破坏作战';
		case 'Cinder Drift (Extreme)': return  '红宝石神兵狂想作战';
		case 'Eden\'s Verse: Furor': return  '伊甸希望乐园 共鸣之章2';
		case 'Eden\'s Verse: Furor (Savage)': return  '伊甸零式希望乐园 共鸣之章2';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'the Diadem': return  '天上福地云冠群岛';
		case 'the Bozja Incident': return  '博兹雅堡垒蒸发事件';
		case 'A Sleep Disturbed': return  '英雄无法安息';
		case 'Memoria Misera (Extreme)': return  '博兹雅堡垒追忆战';
		case 'Eden\'s Verse: Iconoclasm': return  '伊甸希望乐园 共鸣之章3';
		case 'Eden\'s Verse: Iconoclasm (Savage)': return  '伊甸零式希望乐园 共鸣之章3';
		case 'Eden\'s Verse: Refulgence': return  '伊甸希望乐园 共鸣之章4';
		case 'Eden\'s Verse: Refulgence (Savage)': return  '伊甸零式希望乐园 共鸣之章4';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'The Bozjan Southern Front': return  '南方博兹雅战线';
		case 'the Puppets\' Bunker': return  '人偶军事基地';
		case 'the Heroes\' Gauntlet': return  '暗影决战诺弗兰特';
		case 'the Seat of Sacrifice': return  '光之战士歼灭战';
		case 'the Seat of Sacrifice (Extreme)': return  '光之战士幻耀歼灭战';
		case 'Sleep Now in Sapphire': return  '飞翔吧，前往维尔利特！';
		case 'Sleep Now in Sapphire': return  '飞翔吧，前往维尔利特！';
		case 'the Diadem': return  '天上福地云冠群岛';
		case 'Faded Memories': return  '褪色的记忆';
		case 'the Shifting Oubliettes of Lyhe Ghiah': return  '梦羽宝殿';
		case 'Matoya\'s Relict': return  '魔术工房玛托雅工作室';
		case 'Eden\'s Promise: Litany': return  '伊甸希望乐园 再生之章2';
		case 'Eden\'s Promise: Litany (Savage)': return  '伊甸零式希望乐园 再生之章2';
		case 'Eden\'s Promise: Umbra': return  '伊甸希望乐园 再生之章1';
		case 'Eden\'s Promise: Umbra (Savage)': return  '伊甸零式希望乐园 再生之章1';
		case 'Eden\'s Promise: Anamorphosis': return  '伊甸希望乐园 再生之章3';
		case 'Eden\'s Promise: Anamorphosis (Savage)': return  '伊甸零式希望乐园 再生之章3';
		case 'the Diadem': return  '天上福地云冠群岛';
		case 'Anything Gogo\'s': return  '黄金头巾——模仿师格格';
		case 'Triple Triad Open Tournament': return  '九宫幻卡：官方锦标赛';
		case 'Triple Triad Invitational Parlor': return  '九宫幻卡：锦标赛对局室';
		case 'Eden\'s Promise: Eternity': return  '伊甸希望乐园 再生之章4';
		case 'Eden\'s Promise: Eternity (Savage)': return  '伊甸零式希望乐园 再生之章4';
		case 'Delubrum Reginae': return  '女王古殿';
		case 'Delubrum Reginae (Savage)': return  '零式女王古殿';
		case 'Castrum Marinum': return  '绿宝石神兵破坏作战';
		case 'Castrum Marinum (Extreme)': return  '绿宝石神兵狂想作战';
		case 'The Great Ship Vylbrand': return  '威尔布兰德扬帆起航';
		case 'Fit for a Queen': return  '神佑女王';
		case 'Novice Mahjong (Quick Ranked Match)': return  '多玛方城战：东风战一般桌（段位战）';
		case 'Advanced Mahjong (Quick Ranked Match)': return  '多玛方城战：东风战有段桌（段位战）';
		case 'Four-player Mahjong (Quick Match, Kuitan Enabled)': return  '多玛方城战：东风战4人亲友桌（带食断）';
		case 'Four-player Mahjong (Quick Match, Kuitan Disabled)': return  '多玛方城战：东风战4人亲友桌（不带食断）';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'Ocean Fishing': return  '出海垂钓';
		case 'Paglth\'an': return  '黄金平原帕戈尔赞草原';
		case 'Zadnor': return  '扎杜诺尔高原';
		case 'The Tower at Paradigm\'s Breach': return  '希望之炮台：“塔”';
		case 'Death Unto Dawn': return  '死斗至黎明';
		case 'The Cloud Deck': return  '钻石神兵捕获作战';
		case 'The Cloud Deck (Extreme)': return  '钻石神兵狂想作战';
		case 'The Tower of Zot': return  '异形楼阁佐特塔';
		case 'The Stigma Dreamscape': return  '电脑梦境斯提格玛四';
		case 'The Tower of Babil': return  '魔导神门巴别塔';
		case 'The Aitiascope': return  '星海深幽寻因星晶镜';
		case 'Ktisis Hyperboreia': return  '创造环境极北造物院';
		case 'Dragonsong\'s Reprise (Ultimate)': return  '幻想龙诗绝境战';
		case 'Vanaspati': return  '末日树海万相森国';
		case 'The Mothercrystal': return  '海德林歼灭战';
		case 'The Minstrel\'s Ballad: Hydaelyn\'s Call': return  '海德林晖光歼灭战';
		case 'The Dead Ends': return  '最终幻想末世终迹';
		case 'In from the Cold': return  '无尽寒夜';
		case 'Smileton': return  '乐园都市笑笑镇';
		case 'Worthy of His Back': return  '上一任阿谢姆的教导';
		case 'The Final Day': return  '终结之战';
		case 'The Phantoms\' Feast': return  '滑稽灵殿闹鬼盛宴';
		case 'Endwalker': return  '晓月之终途';
		case 'To Calmer Seas': return  '驶向融合的巨轮';
		case 'Asphodelos: The Fourth Circle': return  '万魔殿 边境之狱4';
		case 'Asphodelos: The Fourth Circle (Savage)': return  '零式万魔殿 边境之狱4';
		case 'The Dark Inside': return  '佐迪亚克歼灭战';
		case 'The Minstrel\'s Ballad: Zodiark\'s Fall': return  '佐迪亚克暝暗歼灭战';
		case 'As the Heavens Burn': return  '扩散的末日';
		case 'A Path Unveiled': return  '未来之路';
		case 'Asphodelos: The Third Circle': return  '万魔殿 边境之狱3';
		case 'Asphodelos: The Third Circle (Savage)': return  '零式万魔殿 边境之狱3';
		case 'Asphodelos: The First Circle': return  '万魔殿 边境之狱1';
		case 'Asphodelos: The First Circle (Savage)': return  '零式万魔殿 边境之狱1';
		case 'Asphodelos: The Second Circle': return  '万魔殿 边境之狱2';
		case 'Asphodelos: The Second Circle (Savage)': return  '零式万魔殿 边境之狱2';
		case 'A Frosty Reception': return  '踏破风雪';
		case 'Sage\'s Focus': return  '贤者的短杖';
		case 'The Harvest Begins': return  '大镰的意义';
		case 'Ever March Heavensward': return  '仰望苍穹，不断迈进';
		case 'The Killing Art': return  '暗杀道';
		case 'Life Ephemeral, Path Eternal': return  '生命瞬逝，术道恒久';
		case 'Laid to Rest': return  '英魂安息';
		case 'The Excitatron 6000': return  '惊奇百宝城';
		case 'The Gift of Mercy': return  '目送生者前行';
		case 'the Porta Decumana': return  '究极神兵破坏作战';
		case 'The Palaistra': return  '角力学校';
		case 'The Volcanic Heart': return  '火山之心';
		case 'Cloud Nine': return  '九霄云上';
		case 'The Palaistra': return  '角力学校';
		case 'The Volcanic Heart': return  '火山之心';
		case 'Cloud Nine': return  '九霄云上';
		case 'The Palaistra': return  '角力学校';
		case 'The Volcanic Heart': return  '火山之心';
		case 'Cloud Nine': return  '九霄云上';
		case 'Alzadaal\'s Legacy': return  '近东秘宝阿尔扎达尔海底遗迹群';
		case 'Forlorn Glory': return  '涅尔瓦的帝国';
		case 'The Minstrel\'s Ballad: Endsinger\'s Aria': return  '终极之战';
		case 'The Palaistra': return  '角力学校';
		case 'The Volcanic Heart': return  '火山之心';
		case 'Cloud Nine': return  '九霄云上';
		case 'The Palaistra': return  '角力学校';
		case 'The Volcanic Heart': return  '火山之心';
		case 'Cloud Nine': return  '九霄云上';
		case 'The Palaistra': return  '角力学校';
		case 'The Volcanic Heart': return  '火山之心';
		case 'Cloud Nine': return  '九霄云上';
		case 'The Palaistra': return  '角力学校';
		case 'The Volcanic Heart': return  '火山之心';
		case 'Cloud Nine': return  '九霄云上';
		case 'The Palaistra': return  '角力学校';
		case 'The Volcanic Heart': return  '火山之心';
		case 'Cloud Nine': return  '九霄云上';
		case 'Crystalline Conflict (Custom Match - The Palaistra)': return  '水晶冲突（角力学校：自定赛）';
		case 'Crystalline Conflict (Custom Match - The Volcanic Heart)': return  '水晶冲突（火山之心：自定赛）';
		case 'Crystalline Conflict (Custom Match - Cloud Nine)': return  '水晶冲突（九霄云上：自定赛）';
		case 'Cape Westwind': return  '里塔提恩强攻战';
		case 'Aglaia': return  '灿烂神域阿格莱亚';
		case 'Devastation': return  '拉哈布雷亚讨伐战';
		case 'The Sil\'dihn Subterrane': return  '希拉狄哈水道（异闻迷宫）';
		case 'the Fell Court of Troia': return  '异域孤城特洛亚庭院';
		case 'Storm\'s Crown': return  '巴尔巴莉希娅歼灭战';
		case 'Storm\'s Crown (Extreme)': return  '巴尔巴莉希娅歼殛战';
		case 'Abyssos: The Fifth Circle': return  '万魔殿 炼净之狱1';
		case 'Abyssos: The Fifth Circle (Savage)': return  '零式万魔殿 炼净之狱1';
		case 'Where Everything Begins': return  '失落之力';
		case 'Containment Bay S1T7 (Unreal)': return  '萨菲洛特幻巧战';
		case 'Abyssos: The Seventh Circle': return  '万魔殿 炼净之狱3';
		case 'Abyssos: The Seventh Circle (Savage)': return  '零式万魔殿 炼净之狱3';
		case 'Another Sil\'dihn Subterrane': return  '异闻希拉狄哈水道（标准迷宫）';
		case 'Another Sil\'dihn Subterrane (Savage)': return  '零式异闻希拉狄哈水道（标准迷宫）';
		case 'Abyssos: The Sixth Circle': return  '万魔殿 炼净之狱2';
		case 'Abyssos: The Sixth Circle (Savage)': return  '零式万魔殿 炼净之狱2';
		case 'Abyssos: The Eighth Circle': return  '万魔殿 炼净之狱4';
		case 'Abyssos: The Eighth Circle (Savage)': return  '零式万魔殿 炼净之狱4';
		case 'the Steps of Faith': return  '皇都伊修加德保卫战';
        case 'Lapis Manalis': return  '雪山冥洞冥灵魂石';
        case 'Mount Ordeals': return  '卢比坎特歼灭战';
         case 'Mount Ordeals (Extreme)': return  '卢比坎特歼殛战';
         case 'The Omega Protocol (Ultimate)': return  '欧米茄验证绝境战';
        default:return anyonex;
	}
}





  function fullscreen() {
    var el = document.documentElement
        , rfs = // for newer Webkit and Firefox
               el.requestFullScreen
            || el.webkitRequestFullScreen
            || el.mozRequestFullScreen
            || el.msRequestFullscreen
    ;
    rfs.call(el);
  }
  function isFullscreen()
  {
    return (document.fullscreen || document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement);
  }
    
  $(document).on('webkitfullscreenchange mozfullscreenchange fullscreenchange', function(e)    
  {
  try{
      var isfullscreen = isFullscreen();

      if (!isfullscreen) {
        resize_contents();
             console.log('not fullscreen');
      } else {
        resize_contents();
             console.log('fullscreen');
      }
  }catch(e)
  {alert(e);}
  });
  function resize_contents() {
      var scale = window.innerWidth / content_width;
	  var CurrentZoneName="";
      document.body.style.transform = 'scale(' + scale + ')';
      document.body.style['-o-transform'] = 'scale(' + scale + ')';
      document.body.style['-webkit-transform'] = 'scale(' + scale + ')';
      document.body.style['-moz-transform'] = 'scale(' + scale + ')';
      $("#content").width(content_width + "px")
      var isfullscreen = isFullscreen();
      if(isfullscreen)
      {
        $("#fullscreen").addClass("hide")
        $("#window").removeClass("hide")
      }
      else
      {
        $("#fullscreen").removeClass("hide")
        $("#window").addClass("hide")
      }
  }
// 수정 끝.
		// 表示要素の更新
		//替换最强伤害 日文英文为中文
		
		

		function updateNum(numm){
			var str=numm;
			if(str.length <3){
				for(var x = 0;x < 4 -str.length ;x++){
					str='0'+str;
				}
			}
			return str;		
		}
		function updateNumP(numm){
			var str=numm;
			if(numm<10){
				str='&ensp;'+str;
			}
			return str;
			
		}
function towan(num){
    var str;
    if(!isNaN(num))
    {
        if(parseInt(num)<10000){
            str=num;
         }
        else{
      //   str= (parseInt(num))/10000+"万";
      str= ((parseInt(num))/10000).toFixed(1)+"万";
        }
    }
        return str;
}
		function update(data) {
			var encDiv = document.getElementById("encounter2");
			var timeDiv=document.getElementById("time1");
			var dateDiv=document.getElementById("date1");
			var timeNow=new Date().toLocaleTimeString();
			var dateNow=new Date().toLocaleDateString();
			var deathCounts=0;
			var endCombat=parseInt(parseActFormat("{deaths}" , data.Encounter));
			// DRAWS TITLE  +  "<td33 align='center'>" + parseActFormat("{duration}" , data.Encounter)+"</td33></tr></table>"
			encDiv.innerHTML =	"<table cellspacing=0 cellpadding=0 font-size:7px ><tr><td width=80%>" +tozhongwen(parseActFormat("{CurrentZoneName}" , data.Encounter))+"</td>" ;
			if(parseActFormat("{title}" , data.Encounter)=="Encounter"){
				encDiv.innerHTML +="<table cellspacing=0 cellpadding=0 font-size:7pt><tr><td width=35% >"  + "战斗ing。。。" +"</td></tr></table>";
			}
			else 
				encDiv.innerHTML +="<table cellspacing=0 cellpadding=0 font-size:7pt><tr><td width=35% >"  + parseActFormat("{title}" , data.Encounter) +"</td></tr></table>";
				
			encDiv.innerHTML +="<td44 align='left'>" + "&nbsp;【"+parseInt(parseActFormat("{deaths}" , data.Encounter))+"亡-秒"+parseFloat(parseActFormat("{dps}" , data.Encounter)).toFixed(0)+
			"-总"+towan(parseInt(parseActFormat("{damage}" , data.Encounter))) + "】</td></tr></table>"+"</td><td align='left'>";+"</td44></tr></table>";
			encDiv.innerHTML +="<td33 align='center'>" + parseActFormat("{duration}" , data.Encounter)+"</td33></tr></table>";
			// RANKING, THIS VAR STORES DATA TO BE DISPLAYED
			//团灭自动停止统计数据
			if (endCombat>=8){
				//OverlayPluginApi.endEncounter();
				//OverlayPluginApi.endEncounter();
			}
			ranking = new Array(Object.keys(data.Combatant).length);
			var i = 0;
			maxHit = 0;
			timeDiv.innerHTML=timeNow;
			dateDiv.innerHTML=dateNow;
			for(var combName in data.Combatant) {
				if(!data.Combatant.hasOwnProperty(combName)) continue;
				ranking[i] = {};
				ranking[i].crth=data.Combatant[combName]["crithits"];
				ranking[i].hfld=data.Combatant[combName]["hitfailed"];
				ranking[i].name = data.Combatant[combName]["name"];
				//ranking[i].hps  = parseInt(data.Combatant[combName]["enchps"].replace(/[\.,]+/g), ".").toFixed(0);
				ranking[i].dps  = parseInt(data.Combatant[combName]["encdps"].replace(/[\.,]+/g), ".").toFixed(0);
				ranking[i].hps  = parseFloat(data.Combatant[combName]["enchps"].replace(/[\.,]+/g) ,".").toFixed(0);
				ranking[i].dmg  = parseInt(data.Combatant[combName]["damage"]);
				ranking[i].dmgp = data.Combatant[combName]["damage%"];
				ranking[i].hitss =parseInt(data.Combatant[combName]["swings"]);
				ranking[i].death =data.Combatant[combName]["deaths"];
				ranking[i].dhc =data.Combatant[combName]["DirectHitCount"];
				ranking[i].dhit =updateNum(data.Combatant[combName]["DirectHitCount"])+"次直击:"+updateNumP(parseFloat(data.Combatant[combName]["DirectHitPct"]).toFixed(1))+"%";//+","+data.Combatant[combName]["CritDirectHitCount"]+"次直暴";
				ranking[i].dchp = updateNum(data.Combatant[combName]["CritDirectHitCount"])+"次直暴:"+updateNumP((((data.Combatant[combName]["CritDirectHitCount"])/(parseInt(data.Combatant[combName]["swings"])))*100).toFixed(1))+"%";//             +data.Combatant[combName]["CritDirectHitPct"]*100;
				ranking[i].crtp = updateNum(data.Combatant[combName]["crithits"])+"次暴击:"+updateNumP((parseInt(data.Combatant[combName]["crithits"]) / parseInt(data.Combatant[combName]["swings"]) * 100).toFixed(1))+"%";
				ranking[i].max  = parseInt(data.Combatant[combName]["MAXHIT"].replace(/[\.,]+/g ,""));
				ranking[i].maxn= data.Combatant[combName]["maxhit"];
				//(data.Combatant[combName]["MAXHIT"].substring(0,1));
				
				ranking[i].maxn=forTest(ranking[i].maxn.toString())+":"+towan(ranking[i].max);
				//设置过万保护
				ranking[i].deathcountss=0;
				ranking[i].miss = parseInt(data.Combatant[combName]["misses"]);	
				// this is just to grab the correct glow icon
				ranking[i].job = data.Combatant[combName]["Job"];
				if(ranking[i].job == undefined || ranking[i].job  == "") {
					ranking[i].job = ranking[i].name;
					if(ranking[i].job.indexOf("-Egi (") != -1) {
						ranking[i].job = ranking[i].job.substring(0, ranking[i].job.indexOf("-Egi ("));
					} else if (ranking[i].job.indexOf("Eos (") == 0) {
                    	ranking[i].job = "Eos";
                	} else if (ranking[i].job.indexOf("Selene (") == 0) {
                    	ranking[i].job = "Selene";
                	} else if (ranking[i].job.indexOf("Carbuncle (") != -1) {
						ranking[i].job = "Carbuncle"; 
                	} else if (ranking[i].job.indexOf(" (") != -1) {
						ranking[i].job = "choco";
					} else if (ranking[i].job.indexOf("Limit Break") != -1) {
						ranking[i].job = "极限技";
					} else {
						ranking[i].job = "error";
					} 
				}
				
				// dps may be infinite at zero duration so this makes at least display something later
				if(isNaN(ranking[i].dps)) {
					ranking[i].dps = ranking[i].dmg;
				}
				
				// saves the max hit here because i'm too lazy to parse from the encounter JSON
				if(ranking[i].max > maxHit) maxHit = ranking[i].max;
				
				i++;
			}
			
			// remove stuff dealing 0 damage
			/*
			var clean = new Array();
			for(i = 0; i < ranking.length; i++) {
				if(ranking[i].dmg > 0) {
					clean.push(ranking[i]);
				}
			}
			ranking = clean;
			*/
			// SORT AND UPDATE RANKINGS
			ranking.sort(function(a, b){return b.dmg - a.dmg});
			
			if(prevRank === undefined) {
				prevRank = new Array();
			}
			
			// GET PREVIOUS RANKING
			for (i = 0; i < ranking.length; i++) {
				ranking[i].prev = -1; // this is "no previous rank"
				if(ranking[i].name == "YOU") {
					ranking[i].name=myRoleName;
					}
				if((ranking[i].name).length>=9)
				{
				   ranking[i].name=(ranking[i].name).substring(0,9);
				}
				// if has previous rank, calculate initial position
				for (var j = 0; j < prevRank.length; j++) {
					if (prevRank[j].name === ranking[i].name) {
						ranking[i].prev = j;
						continue;
					}
				}

					
				if(ranking[i].name == myRoleName) {
				//	ranking[i].name="帅气的我我我";
					ranking[i].alpha = (ranking[i].prev == -1)?0:1;
					
				}
				if (ranking[i].prev == -1 || ranking[i].prev > setting.maxDisplay) { 		// for people joining the ranks (fade in)
					ranking[i].y = setting.topOffset + setting.boxHeight * (i + 1);					
					ranking[i].prev = i;
				} else {
					ranking[i].y = setting.topOffset + setting.boxHeight * ranking[i].prev;	// for everyone else (fade out if leaving)
					ranking[i].alpha = 1;
				}
				
				
				// If get better deeps, then flashy effect (only when getting to top ranks tho)
				if (ranking[i].name == myRoleName && i < ranking[i].prev && ranking[i].prev < setting.maxDisplay) {
					flashFlag = true;
					flashPos = Math.min(setting.maxDisplay - 1, ranking[i].prev);
					t = 0;
				}
				

			}
			
			//console.log(data);
			//console.log(ranking);
			
			// UPDATE DATA;
			prevRank = ranking;
			//dataset.push(data); // for debug etc
			
		}

		var t = 0;
		
		
		// Draws stuff by clearing everything every time, so it may be slow as shit on lower end pcs
		function draw() {
		
			var combDiv = document.getElementById("combatant");
			
			// Clears everything before drawing
			while(combDiv.firstChild) {
				combDiv.removeChild(combDiv.firstChild);
			}

			var myRank = -1;
			for(i = 0; i < ranking.length; i++) {
				if(ranking[i].name == "YOU") {
					myRank = i;
				}
			}
			
			// if is scrub and does not even get in the top ranks
			var isLast = (myRank >= setting.maxDisplay - 1);
			
			// the actual drawing part
			for(i = 0; i < ranking.length; i++) {
			
				var box = document.createElement("div");
				box.className = "combBox";
				
				if (i == setting.maxDisplay - 1 && myRank != -1 && isLast) {	// show at last on the list even if not on top ranks
					i = myRank;
					ranking[i].y = setting.topOffset + setting.boxHeight * (setting.maxDisplay - 1);
					ranking[i].alpha +=  (1 - ranking[i].alpha) / setting.transitionTime;
				
				} else if(i >= setting.maxDisplay) {
					if (ranking[i].prev < setting.maxDisplay)  { // fade out
						ranking[i].y += ((setting.topOffset + setting.boxHeight * setting.maxDisplay) - ranking[i].y ) / setting.transitionTime;
						ranking[i].alpha += (0 - ranking[i].alpha) / setting.transitionTime;
					} else {
						ranking[i].alpha = 0;
					}
				} else {
					ranking[i].y += ((setting.topOffset + setting.boxHeight * i) - ranking[i].y ) / setting.transitionTime; 
					if (ranking[i].prev < setting.maxDisplay)  {
						ranking[i].alpha = 1;
					} else {
						ranking[i].alpha += (1 - ranking[i].alpha) / setting.transitionTime;
					}
					
				}
			var imgCombant="";
			if (ranking[i].job=="Limit Break"||ranking[i].job=="limit Break"||ranking[i].job=="Limit break"||ranking[i].job=="limit break"||ranking[i].job=="LimitBreak"||ranking[i].job=="limitBreak"||ranking[i].job=="Limitbreak"||ranking[i].job=="limitbreak")
				{
					imgCombant =" <img src='images/glow/LimitBreak.png' width='40px' height='40px'>";
					
				}
				else
					 imgCombant =" <img src='images/glow/"+ranking[i].job+".png' width='40px' height='40px' >";
					 box.innerHTML+=imgCombant;
					if(ranking[i].dhc<=0){
						ranking[i].dhit="";
						ranking[i].dchp="";
					}
					if(ranking[i].crth<=0){
						ranking[i].crtp="";
						
					}
						box.innerHTML = "<div class='playerName" + ((i == myRank)?" me":"") + "'>" +imgCombant+ processName(ranking[i].name)+ "</div><br>";

						
				
				// writing the deeps or damage
				if (ranking[i].hps > 0) {
					box.innerHTML += "<div class='hps' >"  +"<img src='images/rhps.png' width='13px' height='13px' >" +ranking[i].hps+"&nbsp;" +"</div>	";
				}
				if (ranking[i].dps > 0) {
					
					//box.innerHTML += "<div class='dmg'>"+"["  + ranking[i].hitss+"次攻"+ranking[i].dmgp+ "]" +"&nbsp;" +"</div><br>";
					box.innerHTML += "<div class='dmg' >"  +"<img src='images/rdps.png' width='15px' height='15px' >" +ranking[i].dps+"&nbsp;" +"</div><br>";
					}
				<!-- } else { -->
					<!-- if(ranking[i].dmg > 0) { -->
						<!-- box.innerHTML += "<div class='dmg' style='font-style:italic'>" + towan(ranking[i].dmg) + "</div><br>"; -->
					<!-- } else { -->
						<!-- box.innerHTML += "<div class='dmg'>&nbsp;</div><br>" -->
					<!-- } -->
				<!-- } -->
				
				
				// 百分比
			
				box.innerHTML += "<div class='max3' align='left'>"+ranking[i].crtp+"</div><br>";
				box.innerHTML += "<div class='max4' align='left'>"+ranking[i].dhit+"</div><br>";
				box.innerHTML += "<div class='max5' align='left'>"+ranking[i].dchp+"</div><br>";
				
			//	+ranking[i].dmgp+ranking[i].maxn.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "")
				// fancy printing of max hit
				

				if (ranking[i].max > 0) { 
					if (ranking[i].max == maxHit) {
						box.innerHTML +="<div class='max1' style='color:gold'>"+(ranking[i].maxn.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ""))+ "</div>";
						box.innerHTML += "<div class='max' style='color:gold'>"+ "攻击"+ranking[i].hitss+"次 "+ranking[i].dmgp+ "</div><br>"+"<div class='max0' style='color:gold'>" +"总-"+towan(ranking[i].dmg)+ "</div><br>";
					} else {
						box.innerHTML += "<div class='max1'>" +(ranking[i].maxn.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ""))+ "</div>";
						box.innerHTML += "<div class='max'>" + "攻击"+ranking[i].hitss+"次"+ranking[i].dmgp+ "</div><br>"+"<div class='max0' >" +"总:"+towan(ranking[i].dmg)+ "</div><br>";
					}
				} else {
						
						box.innerHTML += "<div class='max'>&nbsp;</div><br>"+"<div class='max1' style='color:gold'>" +"总:"+towan(ranking[i].dmg)+ "</div><br>";
				}
				if(parseInt(ranking[i].death)>0){
					box.innerHTML +=	"<div class='deathcount'>" +"x"+ ranking[i].death +"<img src='images/rip.png' width='24px' height='20px' >";	
				}
				if(parseInt(ranking[i].miss)>0){
					box.innerHTML +=	"<div class='misscount'>" + ranking[i].miss +"miss&nbsp;";	
				}
				
			//	if(deathCounts>=1){
			//		OverlayPluginApi.endEncounter();}
				
				
				
				// COLOR SETTING
				var tank   = ["Gld", "Gla", "Pld", "Mrd", "Gnb", "War", "Drk"];
				var dps    = ["Pgl", "Mnk", "Lnc", "Drg", "Arc", "Brd", "Rog", "Nin", "Acn", "Smn", "Thm","Dnc",  "Blm", "Mch", "LimitBreak","Sam", "Rdm","Rpr"];
				var healer = ["Cnj", "Whm", "Sch", "Ast","Sge"];
				
				var maxOpacity = (i == myRank)?0.4:0.3;
				var minOpacity = (i == myRank)?0.1:0.0;
				var themeColor = "200,0,200";		
				if (healer.indexOf(ranking[i].job) != -1) {
					themeColor = "107,240,86";
				} else if (dps.indexOf(ranking[i].job) != -1)  {
					themeColor = "200,3,8";
				} else if (tank.indexOf(ranking[i].job) != -1) {
					themeColor = "41,112,243";
				} 
                else if (ranking[i].job.indexOf("Limit Break") != -1){ 
					themeColor = "243,102,8";
				}                
				
				box.style.background = "linear-gradient(rgba(" + themeColor + "," + maxOpacity + 
										((i == myRank)?"),rgba(" + themeColor + ",":"),rgba(0,0,0,") + minOpacity + "))";
				box.style.border = "1px solid rgba(" + themeColor + ", " + maxOpacity + ")"; 
				
				box.style.top = ranking[i].y;
				box.style.opacity = ranking[i].alpha;
				
				var rank = document.createElement("div");
				rank.className = "rank";
				rank.innerHTML = (i + 1);
				box.appendChild(rank);
				combDiv.appendChild(box);
				
			}
			
			// draws flashy effect
			if(setting.flashEnabled && flashFlag && !isLast) {
				flash1 = document.getElementById("flash1");
				flash2 = document.getElementById("flash2");
				
				flash1.style.top = setting.topOffset + setting.boxHeight * flashPos-50;
				flash2.style.top = setting.topOffset + setting.boxHeight * flashPos-50;
				flash1.style.left = -20;
				
				
				if(t < 15) { 
					flash1.style.opacity = t / 15;
					
					flash2.style.opacity = t / 15;
					flash2.style.width = 80 * t;
					flash2.style.left = 70*t - flash2.style.width/2;
				} else { 
					flash1.style.opacity = 1 - (t - 15) / 35;
					flash2.style.opacity = 1 - (t - 15) / 35;
				}
				
				t++;
				if(t >= 50){
					flash1.style.opacity = 0;
					flash2.style.opacity = 0;
					t = 0;
					flashFlag = false;
					flashPos = 999;
				}
			}
			
		}

		// Miniparse フォーマット文字列を解析し、表示文字列を取得する
		function parseActFormat(str, dictionary) {
			var result = "";

			var currentIndex = 0;
			do {
				var openBraceIndex = str.indexOf('{', currentIndex);
				if (openBraceIndex < 0) {
					result += str.slice(currentIndex);
					break;
				}
				else {
					result += str.slice(currentIndex, openBraceIndex);
					var closeBraceIndex = str.indexOf('}', openBraceIndex);
					if (closeBraceIndex < 0) {
						// parse error!
						console.log("parseActFormat: Parse error: missing close-brace for " + openBraceIndex.toString() + ".");
						return "ERROR";
					} else {
						var tag = str.slice(openBraceIndex + 1, closeBraceIndex);
						if (typeof dictionary[tag] !== 'undefined') {
							result += dictionary[tag];
						} else {
							console.log("parseActFormat: Unknown tag: " + tag);
							result += "ERROR";
						}
						currentIndex = closeBraceIndex + 1;
					}
				}
			} while (currentIndex < str.length);

			return result;
		}
		
		
		// Transforms a name into initials
		function processName(name) {
			if(name == "YOU") return name;
			if(setting.nameInitials == "first"){
				return name.replace(/([a-z']+)(?=[ ()]*)/, ".");
			} else if (setting.nameInitials == "last") {
				return name.replace(/([a-z']+)(?=[ ()]*$)/, ".");
			} else if (setting.nameInitials == "initials") {
				return name.replace(/([a-z']+)/g, ".");
			} else {
				return name;
			}
		}
	//	var wsUri = "ws://@HOST_PORT@/MiniParse";


		function updateTest() {
			update(dataset[0]);
			dataset.push(dataset.shift());
		}
		
		drawTimer = setInterval("draw()", 1000/setting.fps);
	    //updateTimer = setInterval("updateTest()", 2000);
		
		//document.onmousedown = function(){updateTest();}
		// TODO consider times where you dont attack|
		
		
					<!-- function test(obj){ -->
					<!-- var div1=document.getElementById("xian"); -->
					<!-- var div2=document.getElementById("dvi2"); -->
						<!-- div1.style.display="none"; -->
						<!-- div2.style.display="block"; -->
						
					<!-- } -->
			function test2(obj){
				var div1=document.getElementById("xian");
				var div2=document.getElementById("dvi2");
			//	if div2.style.	 
							//div1.style.display="block";
							if(div2.style.display=="block"){
								div2.style.display="none";}
								else{
								div2.style.display="block";}
								 

						}
						
				$(document).ready(function(){
				$('#container').css('pointer-events', 'none'); 
				 $(".td111").click(function(){
				 //点击停止encounter
				//	EndEncounter();
				webs.overlayAPI('RequestEnd');
				 });
				  $(".td11").click(function(){
				  $(".td11").hide();
				  $(".td2").show();
				
				  $("#dvi2").hide(2500);
				//	$('html').css("background-image","url('images/B1G.jpg')");
				   $("#encounter").animate({opacity:0.3});
				    
				  
				  });
				  $(".td2").click(function(){
				  $(".td2").hide();
				  $(".td11").show();
				  $("#dvi2").show(2500);
				//  $('html').css("background-image","url('images/BG.jpg')");
				  $("#encounter").animate({opacity:1});
				  
				  });
				  $(".combatant").click(function(){
				//	$('html').css("background-image","url('images/BG.jpg')");
				  });
				});
				
			//汉化	

	</script>
</head>
<body >
<div id="zooom" >
<button class="td2" >Show</button> 
<button class="td11" >Hide</button> 
<button class="td111" >停止统计</button> 
<!-- <button class="td11" id="btn1">Show</button>  -->
<div id="container">
	

		<div id="flash1" ></div>
		
		<!-- <div id="flash2"  onclick="test2(this);" ></div> -->
<div id="flash2"  ></div>

		<div id="encounter"  >
			<div id=timezone>
				<DIV  id="date1" > 
				<!--<SCRIPT> setInterval("date1.innerHTML=(new Date().toLocaleDateString());",1000);</SCRIPT>-->
				</DIV>
				<DIV  id="time1" > 
					
				</DIV>
			</div>
			<div id="encounter2"  >
				请开始你的表演。<br>
				ヾ(@^▽^@)ノ　<br>
				<!--Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a>-->
			</div>

		
		</div>

		
		
<div id="dvi2" style='display:block'>
		<div id="combatant" >
			<!-- ここにヘッダが入る -->
			<!-- ここに各キャラの情報が入る -->
		</div>
	</div>
	
</div>
</div>

<!--<button onclick="forTest('ヘヴィスウィング')" style="top='550px'">emm</button>-->
</body>
<script src="js/lang2.js"></script>
</html>